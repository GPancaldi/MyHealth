<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>MyHealth</title>
    <link rel="icon" type="image/x-icon" href="/imgs/icon-vaccine.png">
    <link rel="stylesheet" href="/Inicial.css">
    <link rel="stylesheet" href="/font-awesome/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Averia+Libre&display=swap" rel="stylesheet">


    <script type="module">

        const botaoMV = document.getElementById("minhaVac") //captura do elemento html

        botaoMV.addEventListener("click", () => {
            window.location.href = "Inicial.html"
        })
        

        const botaoLogout = document.getElementById("logout") //captura do elemento html

        botaoLogout.addEventListener("click", () => {
            window.location.href = "Entrar.html"
        })

        const botaoNV = document.getElementsByClassName("novaVac") //captura do elemento html

        botaoNV[0].addEventListener("click", () => {
        window.location.href = "NovaVacina.html"
})

        



        var storage = localStorage.getItem("dadosVacina")
        
        storage = JSON.parse(storage)
        
        console.log(storage)
        
        function cardVacina(storage){
            let card = document.createElement("div")
            card.className = "vacina-item"

            card.onclick = function(event){
                localStorage.setItem("idEdit", storage.id)
                window.location.href = "EditarVacina.html"
            }

            console.log(storage)

            let nomeVac = document.createElement("span")
            nomeVac.className = "nomeVac"
            nomeVac.innerHTML = storage.nomeVac;

            let dose = document.createElement("span")
            dose.className = "dose"
            dose.innerHTML = storage.doseVac
            
            let dataVac = document.createElement("span")
            dataVac.className = "dataVac"
            dataVac.innerHTML = storage.dataVac
            
            let img = document.createElement("img")
            img.src = storage.imagem
            img.className ="imagem"

            let proxVac = document.createElement("span")
            proxVac.className = "proxDose"
            proxVac.innerHTML = storage.dataProxVac

            card.appendChild(nomeVac)
            card.appendChild(dose)
            card.appendChild(dataVac)
            card.appendChild(img)
            card.appendChild(proxVac)

            return card
        }

        const adicionarCard = (i) => {
            const card = storage[i]
            if(card == null){
                alert("Não há vacinas")
            }
            else{
                document.getElementById("vacina-container").appendChild(cardVacina(card))
            }
        }

        window.onload = () => {
            
                for(var i=0; i< storage.length; i++){
                    adicionarCard(i);
                    
                }
            
        }

    </script>

</head>
<body class="flex-container">
    
    <header class="flex-header">
        <div class="logo">
            <img class="seringa" src="/imgs/icon-vaccine.png" alt="">
            <span>MyHealth</span>        
        </div>
        <div class="header-buttons">
            <button id="minhaVac">Minhas Vacinas</button>
            <button id="logout">Logout</button>
        </div> 

    </header>

    <div class="flex-search">
        <input type="search" name="" id="" placeholder="Pesquisar vacina">
        <button class="search-button" type="submit">
            <i class="fa fa-search"></i>
          </button>
    </div>
    

    <main class="flex-main">
  
        <div class="vacina-container" id="vacina-container">
           
            

            
        </div>
        
        
        <div class="flex-button">
            <button class="novaVac">Nova Vacina</button>
        </div>
    </main>
    
</body>
</html>